
<!-- saved from url=(0077)https://bb.dvfu.ru/bbcswebdav/courses/FU50709-01.03.02-WP-01/task_3_1/48.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
h2, h3, h4 {
text-align: center;
}
code { 
   font-wieght: bold;
}
div {
    width: 80%;
	margin: auto;
}
</style>
</head>
<body>
<div>
	<h2>Вариант 48</h2>
	<h3>Предметная область</h3>
		<p>В библиотеке хранятся книги. Каждая книга относится к одному жанру, опубликована в одном издательстве, может иметь одного или несколько авторов. Также о книге известна дата ее публикации. Библиотека располагает некоторым количеством экземпляров каждой книги.</p><p>Каждый человек может стать читателем в библиотеке. Читатель может взять одну или несколько книг на некоторое время. При этом в библиотеке сохраняется информация о дате выдачи книги и дате ее возврата. Когда читатель берет книгу, количество доступных экземпляров уменьшается, когда возвращает - увеличивается.</p>
	<h4>Логичская модель базы данных</h4>
		<img src="./Задание_files/library.jpg">
	<h3>Задание 1</h3>
		<p>Вывести книги, которые были взяты в библиотеке в октябре месяце. Указать фамилии читателей, которые их взяли, а также дату, когда их взяли. Столбцы назвать <b>Название</b>, <b>Читатель</b>, <b>Дата</b> соответственно. Информацию отсортировать сначала по возрастанию даты, потом в алфавитном порядке по фамилиям читателей, и, наконец, по названиям книг тоже в алфавитном порядке.</p>
	<h3>Задание 2</h3>
		<p>Определить статус каждого читателя. Вывести фамилию читателя и его статус.Если хотя бы одна книга была у читателя "на руках" более 3 недель, в столбец Статус занести "Чёрный список". Если читатель вовсе не брал пока книг в библиотеке присвоить ему статус "Неактивный читатель". Статус всех остальных читателей - "Добросовестный читатель".</p>
	<h3>Задание 3</h3>
		<p>Найти самые популярные жанры (книги, относящиеся к которым чаще всего брали читатели) и вывести все книги, которые относятся к этим жанрам.</p>
	<h3>Задание 4</h3>
		<p>Читатель Самарин С.С.  возвращает последнюю взятую книгу в библиотеку. Необходимо актуализировать базу данных:</p><ul><li>занести текущую дату в столбец <code>return_date</code> соответствующей записи таблицы <code>book_reader</code>;</li><li>увеличить в таблице <code>book</code> на 1 количество доступных книг (<code>available_numbers</code>) для сдаваемой книги.</li></ul><p></p><p><b>Пояснение</b>. В запросах использовать Фамилии И.О. читателя, а не его <code>id</code>.</p>
	<h3>Задание 5</h3>
		<p>Для тех книг, которые читатели брали больше одного раза, вывести, сколько раз брали каждую книгу, а также минимальную разницу в днях между датами, когда читатели ее брали. Столбцы назвать <b>Название</b>, <b>Количество</b>, <b>Минимальный_период</b>. Информацию отсортировать сначала по возрастанию минимального периода, а затем по названиям книг в алфавитном порядке.</p><p><b>Пояснение</b>. Предположим, что одну и ту же книгу читатели взяли в следующие даты 2020-10-12, 2020-11-05, 2020-11-15. Минимальный_период вычисляется так:</p><ul><li>сначала вычисляется разница между следующей и предыдущей датой ( в нашем случае между первой и второй датой прошло 24 дня, между второй и третьей 10 дней);</li><li>	затем находится минимальное значение (в нашем случае это 10).</li></ul><p></p>
	<p><b>Примечание</b>. Для решения задания № 5 использовать оконные функции.</p>
</div>

</body></html>